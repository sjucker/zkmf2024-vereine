<div>
  <app-header header="ZKMF2024 - Vereinsbereich"></app-header>
  <div class="loading-indicator">
    <mat-progress-bar mode="indeterminate" color="accent"
                      *ngIf="(!verein && !notFound && !error) || saving || confirming || uploading"></mat-progress-bar>
  </div>

  <div class="max-width-container" *ngIf="verein">
    <h2>Herzlich willkommen bei der Anmeldung für das ZKMF 2024</h2>
    <p class="button-container">
      <button mat-stroked-button color="primary" (click)="openInfoDialog()">Allgemeine Informationen</button>
      <button mat-flat-button color="primary"
              *ngIf="canConfirmRegistration()"
              [disabled]="unsavedChanges || confirming"
              (click)="confirmRegistration()">Definitiv anmelden
      </button>
    </p>

    <p>&nbsp;</p>

    <h2>Phase 1 (bis 30.06.2023)
      <app-phase-status [status]="verein.phase1Status"></app-phase-status>
    </h2>
    <app-phase1 [verein]="verein"
                [availableVereine]="availableVereine"
                [saving]="saving"
                [uploading]="uploading"
                [anmeldungDisabled]="anmeldungDisabled"
                [unsavedChanges]="unsavedChanges"
                (changed)="onChange()"
                (doSave)="save()"
                (doUpload)="upload($event)"
                (doDeleteImage)="deleteImage($event)"></app-phase1>

    <p>&nbsp;</p>

    <div *ngIf="phase2Enabled">
      <h2>
        <span *ngIf="everyModulC">Phase 2 (bis 01.04.2024)</span>
        <span *ngIf="!everyModulC">Phase 2 (bis 30.09.2023<span *ngIf="someModulC">, Modul C bis 01.04.2024</span>)</span>
        <app-phase-status [status]="verein.phase2Status"></app-phase-status>
      </h2>

      <app-phase2 [verein]="verein"
                  [saving]="saving"
                  [unsavedChanges]="unsavedChanges"
                  [readOnly]="phase2ReadOnly"
                  (changed)="onChange()"
                  (doSave)="save()"></app-phase2>
    </div>
  </div>

  <mat-card appearance="outlined" *ngIf="notFound">
    <mat-card-content>
      <p>Es wurde kein Verein für diesen Login gefunden.</p>
    </mat-card-content>
  </mat-card>

  <mat-card appearance="outlined" *ngIf="error">
    <mat-card-content>
      <p>Ein Fehler ist aufgetreten.</p>
    </mat-card-content>
  </mat-card>
</div>
